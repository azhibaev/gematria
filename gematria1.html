<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title></title>
	<base href="/">

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" type="image/x-icon" href="favicon.ico">

	<style>
	</style>

	<script>
function get_reduced(n)
{
	var s = 0;
	while (n)
	{
		s += n % 10;
		n = Math.floor(n / 10);
	}
	if (s >= 10)
	{
		s = get_reduced(s);
	}
	return s;
}

var s_alfa = [];
var s_simple = [];
var s_reduced = [];

var i_number = 1;
var word_search = "";
var max_count = 100;

document.addEventListener('DOMContentLoaded', function(){
	generate();
});

function generate()
{
	var a_code = 'А'.charCodeAt(0);
	var ya_code = 'Я'.charCodeAt(0);
	var e_code = 'Е'.charCodeAt(0);
	var yo_code = 'Ё'.charCodeAt(0);
	var a_ya_count = ya_code - a_code + 2;
	var i = 0;
	for (var i_code = a_code; i_code <= ya_code; i_code++)
	{
		i++;
		s_alfa.push(String.fromCharCode(i_code));
		s_simple.push(i);
		s_reduced.push(get_reduced(i));
		if (i_code == e_code)
		{
			i++;
			s_alfa.push(String.fromCharCode(yo_code));
			s_simple.push(i);
			s_reduced.push(get_reduced(i));
		}
	}
}

function clear_all_p()
{
	var parent_p = document.getElementById('test_output');
	parent_p.innerHTML = '<p id="last_p"></p>';
}

function add_p(text)
{
	var last_p = document.getElementById('last_p');
	var parent_p = last_p.parentNode;
	var p = document.createElement('p');
	parent_p.insertBefore(p, last_p);
	p.innerHTML = text;
}

function for_alfa()
{
	i_number = parseInt(document.getElementById('i_number').value);
	word_search = document.getElementById('word_search').value;
	max_count = parseInt(document.getElementById('max_count').value);

	if (max_count > 1000000)
	{
		max_count = 1000000;
	}
	if (max_count < 1)
	{
		max_count = 1;
	}
	if (i_number < 1)
	{
		i_number = 1;
	}

	var s_a = [];
	var i_sum = i_number;
	for (var i = 0; i < max_count; i++)
	{
		inc_a(s_a);
		if (check_a_i(s_a, i_sum))
		{
			add_p(a_to_alfa(s_a));
		}
	}
}

function check_a_i(a, i)
{
	var s = 0;
	a.forEach(function(item) {
			s += get_reduced(item);
			});
	if (i == s)
	{
		return 1;
	}
	return 0;
}

function a_to_alfa(a)
{
	var s = '';
	a.forEach(function(item) {
			s = s_alfa[item - 1] + s;
			});
	return s;
}

function inc_a_i(a, index)
{
	if (a.length <= index)
	{
		a.push(0);
	}
	var i = a[index];
	if (i < 33)
	{
		a[index]++;
		return 0;
	}
	else
	{
		a[index] = 1;
	}
	return 1;
}

function inc_a(a)
{
	var i = 0;
	while (inc_a_i(a, i))
	{
		i++;
	}
}

function on_count()
{
	clear_all_p();
	for_alfa();
}
	</script>
</head>
<body>
<label for="i_number">Число</label>
<input id="i_number" type="text" value="3" />
<label for="word_search">Слово</label>
<input id="word_search" type="text" value="test" />
<label for="max_count">Max.</label>
<input id="max_count" type="text" value="1000" />
<input id="submit" type="submit" name="submit" value="Считать" onclick="on_count()" />
<div id="test_output">
<p id="last_p"></p>
</div>
</body>
</html>
